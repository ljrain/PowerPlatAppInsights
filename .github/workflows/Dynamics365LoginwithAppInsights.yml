name: Login to Dynamics 365

on:
  push:
  workflow_dispatch:

jobs:
  login:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up .NET Core
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: '6.0.x'

    - name: Install Dataverse SDK
      run: dotnet add package Microsoft.PowerPlatform.Dataverse.Client

    - name: Login to Dynamics 365
      run: |
        dotnet run --project YourProjectName
      env:
        DATAVERSE_URL: ${{ secrets.DATAVERSE_URL }}
        CLIENT_ID: ${{ secrets.DATAVERSE_CLIENTID }}
        CLIENT_SECRET: ${{ secrets.DATAVERSE_SECRET }}
        TENANT_ID: ${{ secrets.TENANT_ID }}
